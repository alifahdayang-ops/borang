<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Kenderaan SSeMS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f1f5f9;
        }

        /* A4 Setup */
        .sheet {
            background: white;
            width: 210mm;
            min-height: 296mm;
            padding: 15mm 20mm;
            margin: 10mm auto;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            box-sizing: border-box;
        }

        /* Input Styling */
        input[type="text"], input[type="number"] {
            border: none;
            border-bottom: 1px solid #94a3b8;
            outline: none;
            background: transparent;
            padding: 2px 4px;
        }

        input:focus {
            border-bottom: 2px solid #059669;
            background-color: #f8fafc;
        }

        /* Print Rules */
        @media print {
            body { background: none; margin: 0; padding: 0; }
            .no-print { display: none !important; }
            .sheet { 
                margin: 0 !important; 
                box-shadow: none !important; 
                width: 210mm;
                height: 296mm;
                page-break-after: always;
            }
            input { border-bottom: 1px solid #000 !important; }
            .data-input::placeholder { color: transparent; }
        }

        table td, table th {
            border: 1px solid #000;
        }
    </style>
</head>
<body class="p-0 md:p-8">

    <div class="max-w-[210mm] mx-auto mb-6 flex justify-between items-center no-print bg-white p-4 rounded-xl shadow-sm border border-slate-200">
        <div>
            <h1 class="font-bold text-lg text-slate-800 uppercase">Portal Kenderaan SSeMS</h1>
            <p id="save-status" class="text-xs text-emerald-600 font-medium italic">Auto-simpan aktif</p>
        </div>
        <div class="flex gap-2">
            <button onclick="hantarEmail()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all">
                Email Pegawai
            </button>
            <button onclick="window.print()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all">
                Cetak / Simpan PDF
            </button>
        </div>
    </div>

    <div class="sheet">
        <div class="flex items-center justify-between border-b-2 border-black pb-4 mb-6">
            <img src="https://drive.google.com/uc?export=view&id=1ySDH7BRoL4Q2U4Cd9RYdqqj9WDH1CzzZ" alt="Logo" class="w-20" />
            <div class="text-center flex-1 px-4">
                <div class="text-[10pt] font-semibold tracking-widest mb-1">KENDERAAN JABATAN</div>
                <h1 class="text-[16pt] font-bold leading-tight uppercase">Borang Permohonan Penggunaan Kenderaan</h1>
                <h2 class="text-[12pt] font-medium uppercase text-slate-700">Sekolah Seni Malaysia Sarawak</h2>
            </div>
            <div class="w-44 text-right">
                <span class="text-[9pt] font-bold block">NO. RUJUKAN:</span>
                <input type="text" id="no_rujukan" class="data-input w-full text-right font-mono" />
            </div>
        </div>

        <section class="mb-6">
            <h3 class="bg-slate-800 text-white px-3 py-1.5 font-bold mb-4 text-[10pt] uppercase">BAHAGIAN A (Diisi oleh Pemohon)</h3>
            
            <div class="flex gap-10 mb-6 px-2 font-bold text-[11pt]">
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" name="jk" id="bas" class="data-input w-4 h-4 accent-emerald-600"> BAS (40 ORG)
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" name="jk" id="bas_mini" class="data-input w-4 h-4 accent-emerald-600"> BAS MINI (24 ORG)
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" name="jk" id="van" class="data-input w-4 h-4 accent-emerald-600"> VAN (14 ORG)
                </label>
            </div>

            <div class="space-y-4 text-[11pt]">
                <div class="flex items-end gap-2">
                    <span class="font-bold whitespace-nowrap">1. Tujuan penggunaan:</span>
                    <input type="text" id="tujuan" class="data-input flex-1" />
                </div>

                <div class="flex items-end gap-2">
                    <span class="font-bold whitespace-nowrap">2. Jumlah penumpang:</span>
                    <input type="number" id="jumlah_penumpang" class="data-input w-16 text-center font-bold" />
                    <span class="text-[9pt] italic text-slate-500">(Sila lampirkan senarai nama di hal. 2)</span>
                </div>

                <div>
                    <div class="font-bold mb-2">3. Tentatif perjalanan:</div>
                    <table class="w-full text-[10pt]">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="p-2 w-[20%]">TARIKH</th>
                                <th class="p-2 w-[25%]">MASA (PERGI/BALIK)</th>
                                <th class="p-2">PERGERAKAN / LOKASI</th>
                                <th class="p-2 w-[20%] text-[8pt]">UNTUK KEGUNAAN KPT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="h-10">
                                <td><input type="text" id="t1_1" class="data-input w-full h-full text-center"></td>
                                <td><input type="text" id="t1_2" class="data-input w-full h-full text-center"></td>
                                <td><input type="text" id="t1_3" class="data-input w-full h-full px-2"></td>
                                <td class="bg-slate-50"><input type="text" id="t1_4" class="data-input w-full h-full"></td>
                            </tr>
                            <tr class="h-10">
                                <td><input type="text" id="t2_1" class="data-input w-full h-full text-center"></td>
                                <td><input type="text" id="t2_2" class="data-input w-full h-full text-center"></td>
                                <td><input type="text" id="t2_3" class="data-input w-full h-full px-2"></td>
                                <td class="bg-slate-50"><input type="text" id="t2_4" class="data-input w-full h-full"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <div class="grid grid-cols-2 gap-8 mb-8 mt-8 items-end">
            <div class="space-y-3 text-[10pt]">
                <div class="grid grid-cols-[110px_5px_1fr] items-center gap-2">
                    <span class="font-bold">Nama Pemohon</span><span>:</span>
                    <input type="text" id="pemohon_nama" class="data-input font-bold uppercase" />
                </div>
                <div class="grid grid-cols-[110px_5px_1fr] items-center gap-2">
                    <span class="font-bold">Jawatan</span><span>:</span>
                    <input type="text" id="pemohon_jawatan" class="data-input" />
                </div>
                <div class="grid grid-cols-[110px_5px_1fr] items-center gap-2">
                    <span class="font-bold">No. Telefon</span><span>:</span>
                    <input type="text" id="pemohon_tel" class="data-input" />
                </div>
                <div class="grid grid-cols-[110px_5px_1fr] items-center gap-2">
                    <span class="font-bold">Tarikh</span><span>:</span>
                    <input type="text" id="pemohon_tarikh" class="data-input" />
                </div>
            </div>
            <div class="text-center">
                <div class="h-16"></div>
                <div class="border-t border-black pt-2 text-[10pt] font-bold italic">
                    (Tandatangan Pemohon)
                </div>
            </div>
        </div>

        <div class="text-[9pt] border border-slate-300 p-3 rounded bg-slate-50 mb-6">
            <div class="font-bold underline mb-2 uppercase text-[8pt]">Info Pemandu SSeMS:</div>
            <div class="grid grid-cols-3 gap-2 italic">
                <span>1. En. Rasul (019-9556708)</span>
                <span>2. En. Kushairi (013-8400095)</span>
                <span>3. En. Khairil (0111-9684111)</span>
            </div>
        </div>

        <div class="space-y-4">
            <div class="border border-black p-4 rounded bg-slate-50/30">
                <h3 class="font-bold underline mb-3 text-[10pt] uppercase italic">BAHAGIAN B (Kegunaan Pejabat)</h3>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-[10pt] font-bold">Status: ( DISOKONG / TIDAK DISOKONG )</span>
                    <div class="flex gap-4 text-[10pt] font-bold">
                        <label class="flex items-center gap-1"><input type="checkbox" id="ulang" class="w-4 h-4"> Ulang-alik</label>
                        <label class="flex items-center gap-1"><input type="checkbox" id="tunggu" class="w-4 h-4"> Menunggu</label>
                    </div>
                </div>
                <div class="flex items-center gap-2 mb-6">
                    <span class="font-bold text-[10pt]">Ulasan:</span>
                    <input type="text" id="ulasan_pejabat" class="data-input flex-1">
                </div>
                <div class="flex justify-end">
                    <div class="w-56 text-center border-t border-black pt-1 text-[9pt] font-bold italic">Pegawai Kenderaan / KPT</div>
                </div>
            </div>

            <div class="border-2 border-black p-4 rounded">
                <h3 class="font-bold underline mb-3 text-[10pt] uppercase">BAHAGIAN C (Kelulusan Ketua Jabatan)</h3>
                <p class="text-[10pt] font-bold mb-8">Keputusan: ( DILULUSKAN / TIDAK DILULUSKAN )</p>
                <div class="flex justify-end">
                    <div class="w-64 text-center border-t-2 border-black pt-1 text-[10pt] font-bold uppercase">Pengetua / Ketua Jabatan</div>
                </div>
            </div>
        </div>
    </div>

    <div class="sheet">
        <h2 class="text-center font-bold text-[14pt] underline mb-6 uppercase">Senarai Nama Penumpang</h2>
        <table class="w-full text-[10pt] mb-8">
            <thead class="bg-slate-100">
                <tr class="font-bold uppercase text-[9pt]">
                    <th class="p-2 w-[10%] text-center border border-black">BIL.</th>
                    <th class="p-2 text-center border border-black">NAMA PENUH</th>
                    <th class="p-2 w-[25%] text-center border border-black">KELAS</th>
                </tr>
            </thead>
            <tbody id="murid-table">
                </tbody>
        </table>

        <div class="border-2 border-slate-800 p-5 rounded-lg">
            <h4 class="font-extrabold underline mb-3 text-[11pt]">PERATURAN PENGGUNAAN KENDERAAN:</h4>
            <ol class="list-decimal pl-6 text-[10pt] space-y-1.5 font-medium">
                <li>Pastikan kenderaan dalam keadaan selamat dan bersih.</li>
                <li>Minyak kenderaan hendaklah sentiasa mencukupi.</li>
                <li>Lengkapkan buku rekod penggunaan setiap kali perjalanan.</li>
                <li>Guru pengiring WAJIB bersama murid sepanjang masa.</li>
                <li>Patuhi segala undang-undang jalan raya JPJ.</li>
            </ol>
        </div>
    </div>

    <script>
        // Set Tarikh
        document.getElementById('pemohon_tarikh').value = new Date().toLocaleDateString('en-GB');

        // Jana 30 baris (lebih praktikal untuk 1 muka surat A4)
        const tableBody = document.getElementById('murid-table');
        for (let i = 1; i <= 30; i++) {
            const row = document.createElement('tr');
            row.className = 'h-8';
            row.innerHTML = `
                <td class="text-center font-bold border border-black">${i}.</td>
                <td class="border border-black"><input type="text" id="m_n_${i}" class="data-input w-full h-full px-2 uppercase"></td>
                <td class="border border-black"><input type="text" id="m_k_${i}" class="data-input w-full h-full text-center"></td>
            `;
            tableBody.appendChild(row);
        }

        const inputs = document.querySelectorAll('.data-input');
        
        function saveData() {
            const data = {};
            inputs.forEach(input => {
                data[input.id] = (input.type === 'checkbox' || input.type === 'radio') ? input.checked : input.value;
            });
            localStorage.setItem('ssems_portal_v2', JSON.stringify(data));
            document.getElementById('save-status').innerText = 'Data disimpan: ' + new Date().toLocaleTimeString();
        }

        function loadData() {
            const saved = localStorage.getItem('ssems_portal_v2');
            if (saved) {
                const data = JSON.parse(saved);
                inputs.forEach(input => {
                    if (data[input.id] !== undefined) {
                        if (input.type === 'checkbox' || input.type === 'radio') {
                            input.checked = data[input.id];
                        } else {
                            input.value = data[input.id];
                        }
                    }
                });
            }
        }

        inputs.forEach(input => input.addEventListener('input', saveData));

        function hantarEmail() {
            const tujuan = document.getElementById('tujuan').value || 'Tujuan Rasmi';
            const nama = document.getElementById('pemohon_nama').value || 'Pemohon';
            const subjek = encodeURIComponent(`Permohonan Kenderaan: ${tujuan}`);
            const body = encodeURIComponent(`Salam Tuan Hipni,\n\nSaya (${nama}) ingin memohon kenderaan untuk: ${tujuan}.\n\nBorang lengkap telah disediakan. Terima kasih.`);
            window.location.href = `mailto:hipnialza@gmail.com?subject=${subjek}&body=${body}`;
        }

        window.onload = loadData;
    </script>
</body>
</html>